{% extends 'base.html' %}
{% block content %}
<a class ="btn btn-secondary btn-sm mb-3" href ="{% url 'polls:index' %}">Back To Polls</a>
<h1 class ="text-center mb-3">{{ question.question_text }}</h1>

{% if user_vote %}
<div class="alert alert-info">
	<strong>Note:</strong> You already voted on this poll. You can change your vote below.
</div>
{% endif %}

{% if error_message %}
<p class ="alert alert-danger">
	<strong>{{ error_message }}</strong>
</p>
{% endif %}

<form action ="{% url 'polls:vote' question.id %}" method ="post">
	{% csrf_token %}
	{% for choice in question.choice_set.all %}
	<div class ="form-check">
		<input type ="radio" name ="choice" class ="form-check-input" id ="choice{{ forloop.counter }}"
			value ="{{ choice.id }}" 
			{% if user_vote and user_vote.choice.id == choice.id %}checked{% endif %} />
		<label for ="choice{{ forloop.counter }}">
			{{ choice.choice_text }}
			{% if user_vote and user_vote.choice.id == choice.id %}
				<span class="badge badge-primary">Your Current Vote</span>
			{% endif %}
		</label>
	</div>
	{% endfor %}
	<input type ="submit" value ="{% if user_vote %}Update Vote{% else %}Vote{% endif %}" class ="btn btn-success btn-lg btn-block mt-4 w-100" />
</form>
{% endblock %}