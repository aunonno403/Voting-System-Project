{% extends 'base.html' %}
{% block content %}
<h1 class ="text-center mb-3">Poll Questions</h1>

{% if not user.is_authenticated %}
<div class="alert alert-info">
    <strong>Note:</strong> You need to <a href="{% url 'accounts:login' %}" class="alert-link">login</a> to vote on polls. 
    Don't have an account? <a href="{% url 'accounts:register' %}" class="alert-link">Register here</a>.
</div>
{% endif %}

{% if latest_question_list %}
{% for question in latest_question_list %}
<div class ="card mb-3">
	<div class ="card-body">
		<p class ="lead">{{ question.question_text }}</p>
		
		{% if user.is_authenticated and question.id in user_votes %}
			<span class="badge badge-success">You voted on this poll</span>
		{% endif %}
		
		<div class="mt-2">
			{% if user.is_authenticated %}
				<a href ="{% url 'polls:detail' question.id %}" class ="btn btn-primary btn-sm">{% if question.id in user_votes %}Change Vote{% else %}Vote Now!{% endif %}</a>
			{% else %}
				<a href ="{% url 'accounts:login' %}?next={% url 'polls:detail' question.id %}" class ="btn btn-primary btn-sm">Login to Vote</a>
			{% endif %}
			<a href ="{% url 'polls:results' question.id %}" class ="btn btn-secondary btn-sm">Results</a>
		</div>
	</div>
</div>
{% endfor %}
{% else %}

<p>No polls available</p>

{% endif %}
{% endblock %}